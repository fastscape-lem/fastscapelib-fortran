branches:
  only:
    - master

build: false

platform:
  - x64

image:
  - Visual Studio 2017

stack: python 3

environment:
  matrix:
    - MINGW_DIR: C:\mingw-w64\x86_64-7.2.0-posix-seh-rt_v5-rev1\mingw64\bin

before_build:
  - cmd: set PATH=%MINGW_DIR%;%PATH%
  - echo "%PATH%"
  - cmake --version
  - mingw32-make --version
  - # CMake refuses to generate MinGW Makefiles if sh.exe is in the Path
  - ps: Get-Command sh.exe -All | Remove-Item

build_script:
  - mkdir build
  - cd build
  - cmake -G "MSYS Makefiles" -DBUILD_FASTSCAPELIB_SHARED=ON -DBUILD_EXAMPLES=ON -DCMAKE_BUILD_TYPE=Debug ..
  - cmake --build .

test_script:
  - cd examples
  - Fan
